/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input } from '@angular/core';
import { MenuService } from '../../services/menu.service';
import { PROFILE_MENUS } from '../../constants/profile-menus';
import { LOG_OUT } from '../../icons';
var MenuSideBarComponent = /** @class */ (function () {
    function MenuSideBarComponent(menuService) {
        this.menuService = menuService;
        this.showProfile = false;
        this.rootUrl = '../../../';
        this.loadingUser = true;
        this.apps = [];
        this.originalApps = [];
        this.loadingModules = true;
        this.profileMenus = PROFILE_MENUS;
        this.filteredApp = '';
        this.showSidebarApps = false;
        this.logOutIcon = LOG_OUT;
    }
    /**
     * @return {?}
     */
    MenuSideBarComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.menuService.getUserInfo(this.rootUrl).subscribe(function (profile) {
            if (profile) {
                _this.currentUser = {
                    name: profile.displayName,
                    email: profile.email
                };
            }
            _this.loadingUser = false;
        });
        this.menuService
            .getMenuModules(this.rootUrl)
            .subscribe(function (menuModules) {
            if (menuModules !== null) {
                _this.loadingModules = false;
                _this.originalApps = tslib_1.__spread(menuModules);
                _this.apps = _this._prepareMenuModules();
            }
        });
    };
    /**
     * @return {?}
     */
    MenuSideBarComponent.prototype._prepareMenuModules = /**
     * @return {?}
     */
    function () {
        return this.filteredApp === ''
            ? this.originalApps.filter(function (menu) {
                return !menu.onlyShowOnSearch;
            })
            : this.originalApps;
    };
    /**
     * @param {?} e
     * @return {?}
     */
    MenuSideBarComponent.prototype.toggleSidebarMenus = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        e.stopPropagation();
        this.showSidebarApps = !this.showSidebarApps;
    };
    /**
     * @return {?}
     */
    MenuSideBarComponent.prototype.updateMenuModules = /**
     * @return {?}
     */
    function () {
        this.apps = this._prepareMenuModules();
    };
    MenuSideBarComponent.decorators = [
        { type: Component, args: [{
                    selector: 'app-menu-side-bar',
                    template: "<div class=\"sidebar-container\">\n  <div class=\"sidebar-user-profile-block\">\n    <div class=\"sidebar-user-profile-logo\" *ngIf=\"!loadingUser\">{{currentUser?.name | abbreviate}}</div>\n    <div class=\"sidebar-user-profile-info\">\n      <div>\n        <div class=\"sidebar-user-name\" *ngIf=\"!loadingUser\">{{currentUser?.name}}</div>\n        <div class=\"sidebar-user-email\" *ngIf=\"!loadingUser\">{{currentUser?.email}}</div>\n      </div>\n    </div>\n  </div>\n  <ul class=\"sidebar-list-block\">\n    <li [ngClass]=\"{\n          'sidebar-app-hidden': !showSidebarApps\n        }\">\n      <input type=\"text\" class=\"sidebar-app-input\" placeholder=\"Search Apps\" [(ngModel)]=\"filteredApp\" (ngModelChange)=\"updateMenuModules()\">\n    </li>\n    <li class=\"sidebar-app-list\" [ngClass]=\"{\n          'sidebar-app-hidden': !showSidebarApps\n        }\">\n      <a *ngFor=\"let app of  apps | filterByName: filteredApp\" [href]=\"app.defaultAction\" class=\"sidebar-app-menu-btn\">\n        <div class=\"sidebar-app-menu-btn-content\">\n          <img alt=\"\" [src]=\"app.icon\" title=\"{{app.displayName}}\">\n          <div class=\"app-menu-name\">{{app.displayName}}</div>\n        </div>\n      </a>\n    </li>\n    <li *ngFor=\"let profileMenu of profileMenus\">\n      <a [href]=\"rootUrl + profileMenu.defaultAction\">\n        <img alt=\"\" [src]=\"profileMenu.icon\"> {{profileMenu.name}}\n      </a>\n    </li>\n    <li>\n      <a [href]=\"rootUrl + 'dhis-web-commons-security/logout.action'\">\n        <img [src]=\"logOutIcon\"> Log Out\n      </a>\n    </li>\n  </ul>\n</div>",
                    styles: [".sidebar-user-profile-block{text-align:left;background-color:#eee;height:50px;padding:5px;display:flex}.sidebar-user-profile-logo{height:40px;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:500;color:#9e9e9e;width:40px;border-radius:25px;text-align:center;background-color:#ddd}.sidebar-user-profile-info{display:flex;padding-left:10px;align-items:center}.sidebar-list-block{list-style-type:none;margin:0;padding:0;display:block}.sidebar-hidden{display:none!important}.sidebar-app-input{border-style:none;border-bottom:1px solid #eee;color:#777;width:100%;font-size:12px;padding:5px 7px}.sidebar-app-input:focus{outline:0}.sidebar-list-block li a{text-decoration:none;font-size:13px;display:block;color:#000;border-bottom:1px solid #eee;padding:7px 10px}.sidebar-list-block li a img{height:15px}.sidebar-app-list{display:flex;overflow:auto;height:200px;flex-wrap:wrap}.sidebar-app-menu-btn{display:flex!important;align-items:center;justify-content:center;margin:5px;text-decoration:none;border-radius:3px;border:1px solid #eee;transition:all .2s ease-in-out;width:80px;height:80px}.sidebar-app-menu-btn-content{text-align:center}.app-menu-name{margin-top:5px;font-size:11px}.sidebar-user-name{font-size:13px}.sidebar-user-email{font-size:11px;color:#777;font-style:italic}"]
                },] },
    ];
    /** @nocollapse */
    MenuSideBarComponent.ctorParameters = function () { return [
        { type: MenuService }
    ]; };
    MenuSideBarComponent.propDecorators = {
        rootUrl: [{ type: Input }]
    };
    return MenuSideBarComponent;
}());
export { MenuSideBarComponent };
function MenuSideBarComponent_tsickle_Closure_declarations() {
    /** @type {?} */
    MenuSideBarComponent.prototype.rootUrl;
    /** @type {?} */
    MenuSideBarComponent.prototype.showProfile;
    /** @type {?} */
    MenuSideBarComponent.prototype.currentUser;
    /** @type {?} */
    MenuSideBarComponent.prototype.loadingUser;
    /** @type {?} */
    MenuSideBarComponent.prototype.profileMenus;
    /** @type {?} */
    MenuSideBarComponent.prototype.apps;
    /** @type {?} */
    MenuSideBarComponent.prototype.originalApps;
    /** @type {?} */
    MenuSideBarComponent.prototype.loadingModules;
    /** @type {?} */
    MenuSideBarComponent.prototype.filteredApp;
    /** @type {?} */
    MenuSideBarComponent.prototype.showSidebarApps;
    /** @type {?} */
    MenuSideBarComponent.prototype.logOutIcon;
    /** @type {?} */
    MenuSideBarComponent.prototype.menuService;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVudS1zaWRlLWJhci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AaGlzcHR6L25neC1kaGlzMi1tZW51LyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvbWVudS1zaWRlLWJhci9tZW51LXNpZGUtYmFyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFVLE1BQU0sZUFBZSxDQUFDO0FBQ3pELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUMxRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDOUQsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLGFBQWEsQ0FBQzs7SUEwRHBDLDhCQUFvQixXQUF3QjtRQUF4QixnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQUMxQyxJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztRQUN6QixJQUFJLENBQUMsT0FBTyxHQUFHLFdBQVcsQ0FBQztRQUMzQixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztRQUN4QixJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUNmLElBQUksQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDO1FBQzNCLElBQUksQ0FBQyxZQUFZLEdBQUcsYUFBYSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxlQUFlLEdBQUcsS0FBSyxDQUFDO1FBQzdCLElBQUksQ0FBQyxVQUFVLEdBQUcsT0FBTyxDQUFDO0tBQzNCOzs7O0lBRUQsdUNBQVE7OztJQUFSO1FBQUEsaUJBcUJDO1FBcEJDLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsVUFBQyxPQUFZO1lBQ2hFLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7Z0JBQ1osS0FBSSxDQUFDLFdBQVcsR0FBRztvQkFDakIsSUFBSSxFQUFFLE9BQU8sQ0FBQyxXQUFXO29CQUN6QixLQUFLLEVBQUUsT0FBTyxDQUFDLEtBQUs7aUJBQ3JCLENBQUM7YUFDSDtZQUVELEtBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO1NBQzFCLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxXQUFXO2FBQ2IsY0FBYyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7YUFDNUIsU0FBUyxDQUFDLFVBQUMsV0FBZ0I7WUFDMUIsRUFBRSxDQUFDLENBQUMsV0FBVyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQ3pCLEtBQUksQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO2dCQUM1QixLQUFJLENBQUMsWUFBWSxvQkFBTyxXQUFXLENBQUMsQ0FBQztnQkFDckMsS0FBSSxDQUFDLElBQUksR0FBRyxLQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQzthQUN4QztTQUNGLENBQUMsQ0FBQztLQUNOOzs7O0lBRU8sa0RBQW1COzs7O1FBQ3pCLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxLQUFLLEVBQUU7WUFDNUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLFVBQUMsSUFBUztnQkFDakMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDO2FBQy9CLENBQUM7WUFDSixDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQzs7Ozs7O0lBR3hCLGlEQUFrQjs7OztJQUFsQixVQUFtQixDQUFDO1FBQ2xCLENBQUMsQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUNwQixJQUFJLENBQUMsZUFBZSxHQUFHLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQztLQUM5Qzs7OztJQUVELGdEQUFpQjs7O0lBQWpCO1FBQ0UsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztLQUN4Qzs7Z0JBM0dGLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsbUJBQW1CO29CQUM3QixRQUFRLEVBQUUsNGtEQXFDTDtvQkFDTCxNQUFNLEVBQUUsQ0FBQyw0eENBQTR4QyxDQUFDO2lCQUN2eUM7Ozs7Z0JBN0NRLFdBQVc7OzswQkErQ2pCLEtBQUs7OytCQWhEUjs7U0ErQ2Esb0JBQW9CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNZW51U2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL21lbnUuc2VydmljZSc7XG5pbXBvcnQgeyBQUk9GSUxFX01FTlVTIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL3Byb2ZpbGUtbWVudXMnO1xuaW1wb3J0IHsgTE9HX09VVCB9IGZyb20gJy4uLy4uL2ljb25zJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYXBwLW1lbnUtc2lkZS1iYXInLFxuICB0ZW1wbGF0ZTogYDxkaXYgY2xhc3M9XCJzaWRlYmFyLWNvbnRhaW5lclwiPlxuICA8ZGl2IGNsYXNzPVwic2lkZWJhci11c2VyLXByb2ZpbGUtYmxvY2tcIj5cbiAgICA8ZGl2IGNsYXNzPVwic2lkZWJhci11c2VyLXByb2ZpbGUtbG9nb1wiICpuZ0lmPVwiIWxvYWRpbmdVc2VyXCI+e3tjdXJyZW50VXNlcj8ubmFtZSB8IGFiYnJldmlhdGV9fTwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJzaWRlYmFyLXVzZXItcHJvZmlsZS1pbmZvXCI+XG4gICAgICA8ZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwic2lkZWJhci11c2VyLW5hbWVcIiAqbmdJZj1cIiFsb2FkaW5nVXNlclwiPnt7Y3VycmVudFVzZXI/Lm5hbWV9fTwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwic2lkZWJhci11c2VyLWVtYWlsXCIgKm5nSWY9XCIhbG9hZGluZ1VzZXJcIj57e2N1cnJlbnRVc2VyPy5lbWFpbH19PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIDx1bCBjbGFzcz1cInNpZGViYXItbGlzdC1ibG9ja1wiPlxuICAgIDxsaSBbbmdDbGFzc109XCJ7XG4gICAgICAgICAgJ3NpZGViYXItYXBwLWhpZGRlbic6ICFzaG93U2lkZWJhckFwcHNcbiAgICAgICAgfVwiPlxuICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJzaWRlYmFyLWFwcC1pbnB1dFwiIHBsYWNlaG9sZGVyPVwiU2VhcmNoIEFwcHNcIiBbKG5nTW9kZWwpXT1cImZpbHRlcmVkQXBwXCIgKG5nTW9kZWxDaGFuZ2UpPVwidXBkYXRlTWVudU1vZHVsZXMoKVwiPlxuICAgIDwvbGk+XG4gICAgPGxpIGNsYXNzPVwic2lkZWJhci1hcHAtbGlzdFwiIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAnc2lkZWJhci1hcHAtaGlkZGVuJzogIXNob3dTaWRlYmFyQXBwc1xuICAgICAgICB9XCI+XG4gICAgICA8YSAqbmdGb3I9XCJsZXQgYXBwIG9mICBhcHBzIHwgZmlsdGVyQnlOYW1lOiBmaWx0ZXJlZEFwcFwiIFtocmVmXT1cImFwcC5kZWZhdWx0QWN0aW9uXCIgY2xhc3M9XCJzaWRlYmFyLWFwcC1tZW51LWJ0blwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwic2lkZWJhci1hcHAtbWVudS1idG4tY29udGVudFwiPlxuICAgICAgICAgIDxpbWcgYWx0PVwiXCIgW3NyY109XCJhcHAuaWNvblwiIHRpdGxlPVwie3thcHAuZGlzcGxheU5hbWV9fVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJhcHAtbWVudS1uYW1lXCI+e3thcHAuZGlzcGxheU5hbWV9fTwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvYT5cbiAgICA8L2xpPlxuICAgIDxsaSAqbmdGb3I9XCJsZXQgcHJvZmlsZU1lbnUgb2YgcHJvZmlsZU1lbnVzXCI+XG4gICAgICA8YSBbaHJlZl09XCJyb290VXJsICsgcHJvZmlsZU1lbnUuZGVmYXVsdEFjdGlvblwiPlxuICAgICAgICA8aW1nIGFsdD1cIlwiIFtzcmNdPVwicHJvZmlsZU1lbnUuaWNvblwiPiB7e3Byb2ZpbGVNZW51Lm5hbWV9fVxuICAgICAgPC9hPlxuICAgIDwvbGk+XG4gICAgPGxpPlxuICAgICAgPGEgW2hyZWZdPVwicm9vdFVybCArICdkaGlzLXdlYi1jb21tb25zLXNlY3VyaXR5L2xvZ291dC5hY3Rpb24nXCI+XG4gICAgICAgIDxpbWcgW3NyY109XCJsb2dPdXRJY29uXCI+IExvZyBPdXRcbiAgICAgIDwvYT5cbiAgICA8L2xpPlxuICA8L3VsPlxuPC9kaXY+YCxcbiAgc3R5bGVzOiBbYC5zaWRlYmFyLXVzZXItcHJvZmlsZS1ibG9ja3t0ZXh0LWFsaWduOmxlZnQ7YmFja2dyb3VuZC1jb2xvcjojZWVlO2hlaWdodDo1MHB4O3BhZGRpbmc6NXB4O2Rpc3BsYXk6ZmxleH0uc2lkZWJhci11c2VyLXByb2ZpbGUtbG9nb3toZWlnaHQ6NDBweDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7Zm9udC1zaXplOjE0cHg7Zm9udC13ZWlnaHQ6NTAwO2NvbG9yOiM5ZTllOWU7d2lkdGg6NDBweDtib3JkZXItcmFkaXVzOjI1cHg7dGV4dC1hbGlnbjpjZW50ZXI7YmFja2dyb3VuZC1jb2xvcjojZGRkfS5zaWRlYmFyLXVzZXItcHJvZmlsZS1pbmZve2Rpc3BsYXk6ZmxleDtwYWRkaW5nLWxlZnQ6MTBweDthbGlnbi1pdGVtczpjZW50ZXJ9LnNpZGViYXItbGlzdC1ibG9ja3tsaXN0LXN0eWxlLXR5cGU6bm9uZTttYXJnaW46MDtwYWRkaW5nOjA7ZGlzcGxheTpibG9ja30uc2lkZWJhci1oaWRkZW57ZGlzcGxheTpub25lIWltcG9ydGFudH0uc2lkZWJhci1hcHAtaW5wdXR7Ym9yZGVyLXN0eWxlOm5vbmU7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTtjb2xvcjojNzc3O3dpZHRoOjEwMCU7Zm9udC1zaXplOjEycHg7cGFkZGluZzo1cHggN3B4fS5zaWRlYmFyLWFwcC1pbnB1dDpmb2N1c3tvdXRsaW5lOjB9LnNpZGViYXItbGlzdC1ibG9jayBsaSBhe3RleHQtZGVjb3JhdGlvbjpub25lO2ZvbnQtc2l6ZToxM3B4O2Rpc3BsYXk6YmxvY2s7Y29sb3I6IzAwMDtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlO3BhZGRpbmc6N3B4IDEwcHh9LnNpZGViYXItbGlzdC1ibG9jayBsaSBhIGltZ3toZWlnaHQ6MTVweH0uc2lkZWJhci1hcHAtbGlzdHtkaXNwbGF5OmZsZXg7b3ZlcmZsb3c6YXV0bztoZWlnaHQ6MjAwcHg7ZmxleC13cmFwOndyYXB9LnNpZGViYXItYXBwLW1lbnUtYnRue2Rpc3BsYXk6ZmxleCFpbXBvcnRhbnQ7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7bWFyZ2luOjVweDt0ZXh0LWRlY29yYXRpb246bm9uZTtib3JkZXItcmFkaXVzOjNweDtib3JkZXI6MXB4IHNvbGlkICNlZWU7dHJhbnNpdGlvbjphbGwgLjJzIGVhc2UtaW4tb3V0O3dpZHRoOjgwcHg7aGVpZ2h0OjgwcHh9LnNpZGViYXItYXBwLW1lbnUtYnRuLWNvbnRlbnR7dGV4dC1hbGlnbjpjZW50ZXJ9LmFwcC1tZW51LW5hbWV7bWFyZ2luLXRvcDo1cHg7Zm9udC1zaXplOjExcHh9LnNpZGViYXItdXNlci1uYW1le2ZvbnQtc2l6ZToxM3B4fS5zaWRlYmFyLXVzZXItZW1haWx7Zm9udC1zaXplOjExcHg7Y29sb3I6Izc3Nztmb250LXN0eWxlOml0YWxpY31gXVxufSlcbmV4cG9ydCBjbGFzcyBNZW51U2lkZUJhckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIEBJbnB1dCgpXG4gIHJvb3RVcmw6IHN0cmluZztcbiAgc2hvd1Byb2ZpbGU6IGJvb2xlYW47XG4gIGN1cnJlbnRVc2VyOiBhbnk7XG4gIGxvYWRpbmdVc2VyOiBib29sZWFuO1xuICBwcm9maWxlTWVudXM6IGFueVtdO1xuICBhcHBzOiBhbnlbXTtcbiAgb3JpZ2luYWxBcHBzOiBhbnlbXTtcbiAgbG9hZGluZ01vZHVsZXM6IGJvb2xlYW47XG4gIGZpbHRlcmVkQXBwOiBzdHJpbmc7XG4gIHNob3dTaWRlYmFyQXBwczogYm9vbGVhbjtcbiAgbG9nT3V0SWNvbjogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbWVudVNlcnZpY2U6IE1lbnVTZXJ2aWNlKSB7XG4gICAgdGhpcy5zaG93UHJvZmlsZSA9IGZhbHNlO1xuICAgIHRoaXMucm9vdFVybCA9ICcuLi8uLi8uLi8nO1xuICAgIHRoaXMubG9hZGluZ1VzZXIgPSB0cnVlO1xuICAgIHRoaXMuYXBwcyA9IFtdO1xuICAgIHRoaXMub3JpZ2luYWxBcHBzID0gW107XG4gICAgdGhpcy5sb2FkaW5nTW9kdWxlcyA9IHRydWU7XG4gICAgdGhpcy5wcm9maWxlTWVudXMgPSBQUk9GSUxFX01FTlVTO1xuICAgIHRoaXMuZmlsdGVyZWRBcHAgPSAnJztcbiAgICB0aGlzLnNob3dTaWRlYmFyQXBwcyA9IGZhbHNlO1xuICAgIHRoaXMubG9nT3V0SWNvbiA9IExPR19PVVQ7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLm1lbnVTZXJ2aWNlLmdldFVzZXJJbmZvKHRoaXMucm9vdFVybCkuc3Vic2NyaWJlKChwcm9maWxlOiBhbnkpID0+IHtcbiAgICAgIGlmIChwcm9maWxlKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSB7XG4gICAgICAgICAgbmFtZTogcHJvZmlsZS5kaXNwbGF5TmFtZSxcbiAgICAgICAgICBlbWFpbDogcHJvZmlsZS5lbWFpbFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICB0aGlzLmxvYWRpbmdVc2VyID0gZmFsc2U7XG4gICAgfSk7XG5cbiAgICB0aGlzLm1lbnVTZXJ2aWNlXG4gICAgICAuZ2V0TWVudU1vZHVsZXModGhpcy5yb290VXJsKVxuICAgICAgLnN1YnNjcmliZSgobWVudU1vZHVsZXM6IGFueSkgPT4ge1xuICAgICAgICBpZiAobWVudU1vZHVsZXMgIT09IG51bGwpIHtcbiAgICAgICAgICB0aGlzLmxvYWRpbmdNb2R1bGVzID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5vcmlnaW5hbEFwcHMgPSBbLi4ubWVudU1vZHVsZXNdO1xuICAgICAgICAgIHRoaXMuYXBwcyA9IHRoaXMuX3ByZXBhcmVNZW51TW9kdWxlcygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX3ByZXBhcmVNZW51TW9kdWxlcygpIHtcbiAgICByZXR1cm4gdGhpcy5maWx0ZXJlZEFwcCA9PT0gJydcbiAgICAgID8gdGhpcy5vcmlnaW5hbEFwcHMuZmlsdGVyKChtZW51OiBhbnkpID0+IHtcbiAgICAgICAgICByZXR1cm4gIW1lbnUub25seVNob3dPblNlYXJjaDtcbiAgICAgICAgfSlcbiAgICAgIDogdGhpcy5vcmlnaW5hbEFwcHM7XG4gIH1cblxuICB0b2dnbGVTaWRlYmFyTWVudXMoZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy5zaG93U2lkZWJhckFwcHMgPSAhdGhpcy5zaG93U2lkZWJhckFwcHM7XG4gIH1cblxuICB1cGRhdGVNZW51TW9kdWxlcygpIHtcbiAgICB0aGlzLmFwcHMgPSB0aGlzLl9wcmVwYXJlTWVudU1vZHVsZXMoKTtcbiAgfVxufVxuIl19